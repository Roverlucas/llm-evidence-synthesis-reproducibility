{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Extraction Output",
  "type": "object",
  "required": ["study_id", "estimates"],
  "properties": {
    "study_id": { "type": "string" },
    "study_location": { "type": ["string", "null"] },
    "study_period": { "type": ["string", "null"] },
    "study_design": {
      "type": "string",
      "enum": ["time_series", "case_crossover", "other"]
    },
    "population": {
      "type": "string",
      "enum": ["general", "elderly", "children", "other"]
    },
    "sample_size": { "type": ["integer", "null"] },
    "estimates": {
      "type": "array",
      "minItems": 0,
      "items": {
        "type": "object",
        "required": ["effect_measure", "effect_estimate", "ci_lower", "ci_upper"],
        "properties": {
          "effect_measure": {
            "type": "string",
            "enum": ["RR", "OR", "HR", "IRR", "other"]
          },
          "effect_estimate": { "type": "number", "minimum": 0.1, "maximum": 10.0 },
          "ci_lower": { "type": "number", "minimum": 0.1, "maximum": 10.0 },
          "ci_upper": { "type": "number", "minimum": 0.1, "maximum": 10.0 },
          "ci_level": { "type": "integer", "default": 95 },
          "exposure_increment": { "type": ["string", "null"] },
          "lag": { "type": ["string", "null"] },
          "outcome_specific": { "type": ["string", "null"] },
          "covariates": {
            "type": ["array", "null"],
            "items": { "type": "string" }
          }
        }
      }
    }
  }
}
